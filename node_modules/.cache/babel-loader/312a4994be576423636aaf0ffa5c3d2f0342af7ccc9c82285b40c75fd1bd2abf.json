{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Button,Form}from\"react-bootstrap\";import qrcode from\"../Images/QRCode.png\";import greenTick from\"../Images/greenTick.gif\";// Add your green tick GIF here\nimport greenTickStatic from\"../Images/greenTickStatic.png\";// Static image of the tick\nimport\"./Stylings/PaymentOverlay.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function PaymentOverlay(_ref){let{onClose,OrderDetails,totalPrice,cartItems}=_ref;const[upiId]=useState(\"6369715501-b7bb@axl\");const[token,setToken]=useState(\"\");const[paymentDone,setPaymentDone]=useState(false);// Track payment status\nconst[showStaticTick,setShowStaticTick]=useState(false);// Toggle static image\nuseEffect(()=>{// Generate a random token\nconst generateToken=()=>{const chars=\"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";let result=\"\";for(let i=0;i<8;i++){result+=chars.charAt(Math.floor(Math.random()*chars.length));}return result;};setToken(generateToken());// Prevent background scrolling when overlay is open\ndocument.body.classList.add(\"overlay-active\");// Clean up when the overlay is closed\nreturn()=>{document.body.classList.remove(\"overlay-active\");};},[]);const handlePaymentDone=async()=>{setPaymentDone(true);// Switch to static tick after the GIF finishes (e.g., 3 seconds)\nsetTimeout(()=>setShowStaticTick(true),1540);const payload={...OrderDetails,Token:token,AmountPaid:totalPrice.toFixed(2),OrderedItems:cartItems.map(item=>({ProductName:item.product.dname,Quantity:item.quantity}))};try{await fetch(\"https://script.google.com/macros/s/AKfycbxBS7fM5ZT1ssX4q4rImFS8mWBZC0BR21uRg3CBP8M3_407jnRSbVbIC5tLGMgvG14Gwg/exec\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(payload),mode:\"no-cors\"// Allow the fetch to follow redirects\n});}catch(error){console.error(\"Fetch Error:\",error);alert(\"Error submitting details. Please try again.\");setPaymentDone(false);// If there was an error, reset the state\n}};return/*#__PURE__*/_jsx(\"div\",{className:\"overlay-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overlay\",children:/*#__PURE__*/_jsx(\"div\",{className:\"payment-modal\",children:paymentDone?/*#__PURE__*/// Show green tick and payment message after payment is done\n_jsxs(\"div\",{className:\"payment-success-container text-center\",children:[showStaticTick?/*#__PURE__*/_jsx(\"img\",{src:greenTickStatic,alt:\"Payment Successful\",className:\"green-tick\"}):/*#__PURE__*/_jsx(\"img\",{src:greenTick,alt:\"Payment Successful\",className:\"green-tick\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"mt-3 text-success\",children:\"Payment Done\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-center\",children:\"Payment is in the verification process. You'll be notified via your Email ID. Thank you!\"})]}):/*#__PURE__*/// Show initial payment details overlay\n_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Scan QR or Use the Details Below\"}),/*#__PURE__*/_jsx(\"div\",{className:\"qr-placeholder\",children:/*#__PURE__*/_jsx(\"img\",{src:qrcode,alt:\"QR Code\"})}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Total Price : \\u20B9\",totalPrice.toFixed(2)]}),\" \",/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"UPI ID\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:upiId,readOnly:true}),/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",className:\"ms-2\",onClick:()=>navigator.clipboard.writeText(upiId),children:\"Copy\"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Token\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:token,readOnly:true}),/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",className:\"ms-2\",onClick:()=>navigator.clipboard.writeText(token),children:\"Copy\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning mt-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:\"}),\" Please copy the token and include it in the payment reference or remarks section while making the payment. This will help us verify your transaction faster.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-container\",children:[/*#__PURE__*/_jsx(Button,{variant:\"warning\",className:\"me-2\",onClick:handlePaymentDone,disabled:paymentDone// Disable the button if payment is done\n,children:paymentDone?\"Payment in Process...\":\"Payment Done\"}),/*#__PURE__*/_jsx(Button,{variant:\"dark\",onClick:onClose,children:\"Close\"})]})]})})})});}","map":{"version":3,"names":["React","useState","useEffect","Button","Form","qrcode","greenTick","greenTickStatic","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PaymentOverlay","_ref","onClose","OrderDetails","totalPrice","cartItems","upiId","token","setToken","paymentDone","setPaymentDone","showStaticTick","setShowStaticTick","generateToken","chars","result","i","charAt","Math","floor","random","length","document","body","classList","add","remove","handlePaymentDone","setTimeout","payload","Token","AmountPaid","toFixed","OrderedItems","map","item","ProductName","product","dname","Quantity","quantity","fetch","method","headers","JSON","stringify","mode","error","console","alert","className","children","src","alt","Group","Label","Control","type","value","readOnly","variant","onClick","navigator","clipboard","writeText","disabled"],"sources":["/workspaces/appampatt_mittai/src/Components/PaymentOverlay.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Button, Form } from \"react-bootstrap\";\nimport qrcode from \"../Images/QRCode.png\";\nimport greenTick from \"../Images/greenTick.gif\"; // Add your green tick GIF here\nimport greenTickStatic from \"../Images/greenTickStatic.png\"; // Static image of the tick\nimport \"./Stylings/PaymentOverlay.css\";\n\nexport default function PaymentOverlay({ onClose, OrderDetails, totalPrice, cartItems }) {\n  const [upiId] = useState(\"6369715501-b7bb@axl\");\n  const [token, setToken] = useState(\"\");\n  const [paymentDone, setPaymentDone] = useState(false); // Track payment status\n  const [showStaticTick, setShowStaticTick] = useState(false); // Toggle static image\n\n  useEffect(() => {\n    // Generate a random token\n    const generateToken = () => {\n      const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n      let result = \"\";\n      for (let i = 0; i < 8; i++) {\n        result += chars.charAt(Math.floor(Math.random() * chars.length));\n      }\n      return result;\n    };\n    setToken(generateToken());\n  \n    // Prevent background scrolling when overlay is open\n    document.body.classList.add(\"overlay-active\");\n  \n    // Clean up when the overlay is closed\n    return () => {\n      document.body.classList.remove(\"overlay-active\");\n    };\n  }, []);\n  \n\n  const handlePaymentDone = async () => {\n    setPaymentDone(true);\n\n    // Switch to static tick after the GIF finishes (e.g., 3 seconds)\n    setTimeout(() => setShowStaticTick(true), 1540);\n\n    const payload = {\n      ...OrderDetails,\n      Token: token,\n      AmountPaid: totalPrice.toFixed(2),\n      OrderedItems: cartItems.map((item) => ({\n        ProductName: item.product.dname,\n        Quantity: item.quantity,\n      })),\n    };\n\n    try {\n      await fetch(\n        \"https://script.google.com/macros/s/AKfycbxBS7fM5ZT1ssX4q4rImFS8mWBZC0BR21uRg3CBP8M3_407jnRSbVbIC5tLGMgvG14Gwg/exec\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(payload),\n          mode: \"no-cors\", // Allow the fetch to follow redirects\n        }\n      );\n    } catch (error) {\n      console.error(\"Fetch Error:\", error);\n      alert(\"Error submitting details. Please try again.\");\n      setPaymentDone(false); // If there was an error, reset the state\n    }\n  };\n\n  return (\n    <div className=\"overlay-container\">\n      <div className=\"overlay\">\n        <div className=\"payment-modal\">\n          {paymentDone ? (\n            // Show green tick and payment message after payment is done\n            <div className=\"payment-success-container text-center\">\n              {showStaticTick ? (\n                <img\n                  src={greenTickStatic}\n                  alt=\"Payment Successful\"\n                  className=\"green-tick\"\n                />\n              ) : (\n                <img\n                  src={greenTick}\n                  alt=\"Payment Successful\"\n                  className=\"green-tick\"\n                />\n              )}\n              <h4 className=\"mt-3 text-success\">Payment Done</h4>\n              <p className=\"mt-2 text-center\">\n                Payment is in the verification process. You'll be notified via your Email ID. Thank you!\n              </p>\n            </div>\n          ) : (\n            // Show initial payment details overlay\n            <>\n              <h4>Scan QR or Use the Details Below</h4>\n\n              <div className=\"qr-placeholder\">\n            <img src={qrcode} alt=\"QR Code\" />\n          </div>\n              <h4>Total Price : â‚¹{totalPrice.toFixed(2)}</h4> {/* Display the total price */}\n\n              <Form.Group className=\"mb-3\">\n                <Form.Label>UPI ID</Form.Label>\n                <div className=\"d-flex\">\n                  <Form.Control type=\"text\" value={upiId} readOnly />\n                  <Button\n                    variant=\"outline-secondary\"\n                    className=\"ms-2\"\n                    onClick={() => navigator.clipboard.writeText(upiId)}\n                  >\n                    Copy\n                  </Button>\n                </div>\n              </Form.Group>\n\n              <Form.Group className=\"mb-3\">\n                <Form.Label>Token</Form.Label>\n                <div className=\"d-flex\">\n                  <Form.Control type=\"text\" value={token} readOnly />\n                  <Button\n                    variant=\"outline-secondary\"\n                    className=\"ms-2\"\n                    onClick={() => navigator.clipboard.writeText(token)}\n                  >\n                    Copy\n                  </Button>\n                </div>\n              </Form.Group>\n\n              <div className=\"alert alert-warning mt-3\">\n                <strong>Note:</strong> Please copy the token and include it in the payment reference or remarks section while making the payment. This will help us verify your transaction faster.\n              </div>\n\n              <div className=\"buttons-container\">\n  <Button\n    variant=\"warning\"\n    className=\"me-2\"\n    onClick={handlePaymentDone}\n    disabled={paymentDone} // Disable the button if payment is done\n  >\n    {paymentDone ? \"Payment in Process...\" : \"Payment Done\"}\n  </Button>\n\n  <Button variant=\"dark\" onClick={onClose}>\n    Close\n  </Button>\n</div>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}